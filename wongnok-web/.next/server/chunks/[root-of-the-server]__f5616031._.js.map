{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 186, "column": 0}, "map": {"version":3,"sources":["file:///app/src/app/api/auth/%5B...nextauth%5D/route.ts"],"sourcesContent":["import axios from 'axios'\r\nimport NextAuth from 'next-auth'\r\nimport KeycloakProvider from 'next-auth/providers/keycloak'\r\n\r\nconst handler = NextAuth({\r\n  providers: [\r\n    KeycloakProvider({\r\n      clientId: process.env.KEYCLOAK_CLIENT_ID ?? '',\r\n      clientSecret: process.env.KEYCLOAK_CLIENT_SECRET ?? '',\r\n      issuer: process.env.KEYCLOAK_ISSUER,\r\n      authorization: { params: { prompt: 'login' } },\r\n    }),\r\n  ],\r\n\r\n  callbacks: {\r\n    // for keep jwt token\r\n    async jwt({ token, account }) {\r\n      if (account) {\r\n        console.log('account : ', account)\r\n        token.accessToken = account.access_token\r\n        token.userId = account.providerAccountId\r\n\r\n        // เรียก API เพิ่ม user หลัง login สำเร็จ\r\n        try {\r\n          console.log('test')\r\n          await axios.post(\r\n            `${process.env.NEXT_PUBLIC_BASE_PATH}/api/v1/users/`,{},\r\n            {\r\n              headers: {\r\n                Authorization: `Bearer ${account.access_token}`,\r\n                'Content-Type': 'application/json',\r\n              },\r\n            }\r\n          )\r\n        } catch (err) {\r\n          console.error('Create user error:', err)\r\n        }\r\n      }\r\n      return token\r\n    },\r\n\r\n    // get session data from jwt token\r\n    async session({ session, token }) {\r\n      // console.log('token -------->',token)\r\n      session.accessToken = token.accessToken\r\n      session.userId = token.userId\r\n      return session\r\n    },\r\n  },\r\n  secret: process.env.NEXTAUTH_SECRET,\r\n})\r\n\r\nexport { handler as GET, handler as POST }\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEA,MAAM,UAAU,CAAA,GAAA,uIAAA,CAAA,UAAQ,AAAD,EAAE;IACvB,WAAW;QACT,CAAA,GAAA,uJAAA,CAAA,UAAgB,AAAD,EAAE;YACf,UAAU,QAAQ,GAAG,CAAC,kBAAkB,IAAI;YAC5C,cAAc,QAAQ,GAAG,CAAC,sBAAsB,IAAI;YACpD,QAAQ,QAAQ,GAAG,CAAC,eAAe;YACnC,eAAe;gBAAE,QAAQ;oBAAE,QAAQ;gBAAQ;YAAE;QAC/C;KACD;IAED,WAAW;QACT,qBAAqB;QACrB,MAAM,KAAI,EAAE,KAAK,EAAE,OAAO,EAAE;YAC1B,IAAI,SAAS;gBACX,QAAQ,GAAG,CAAC,cAAc;gBAC1B,MAAM,WAAW,GAAG,QAAQ,YAAY;gBACxC,MAAM,MAAM,GAAG,QAAQ,iBAAiB;gBAExC,yCAAyC;gBACzC,IAAI;oBACF,QAAQ,GAAG,CAAC;oBACZ,MAAM,uIAAA,CAAA,UAAK,CAAC,IAAI,CACd,wDAAqC,cAAc,CAAC,EAAC,CAAC,GACtD;wBACE,SAAS;4BACP,eAAe,CAAC,OAAO,EAAE,QAAQ,YAAY,EAAE;4BAC/C,gBAAgB;wBAClB;oBACF;gBAEJ,EAAE,OAAO,KAAK;oBACZ,QAAQ,KAAK,CAAC,sBAAsB;gBACtC;YACF;YACA,OAAO;QACT;QAEA,kCAAkC;QAClC,MAAM,SAAQ,EAAE,OAAO,EAAE,KAAK,EAAE;YAC9B,uCAAuC;YACvC,QAAQ,WAAW,GAAG,MAAM,WAAW;YACvC,QAAQ,MAAM,GAAG,MAAM,MAAM;YAC7B,OAAO;QACT;IACF;IACA,QAAQ,QAAQ,GAAG,CAAC,eAAe;AACrC","debugId":null}}]
}